{"componentChunkName":"component---src-templates-blog-post-js","path":"/React_State_Immutability/","webpackCompilationHash":"d6a72ee20ce3d31a15aa","result":{"data":{"markdownRemark":{"html":"<p><img src=\"https://i.imgur.com/OULUQRu.jpg\" title=\"Photo by Chokniti Khongchum from Pexels\"></p>\n<p>How to update an array state in React?</p>\n<p>States in React are declared with const and therefore immutable. It means we cant (or rather shouldnt) manipulate them directly.</p>\n<p>A quote from the official React documentation says:</p>\n<p><em>\"Never mutate this.state directly, as calling setState() afterwards may replace the mutation you made. Treat this.state as if it were immutable.\"</em></p>\n<p>What is direct manipulation?</p>\n<p>Imagine we have this state:</p>\n<pre><code>const [array, setArray] = useState([1,2,3])\n</code></pre>\n<p>Then we try to manipulate it directly:</p>\n<pre><code>array = [4]\n</code></pre>\n<p>State should also not be MUTATED. What is mutation? It can be an array method that will CHANGE the state directly. For example push (adding one more element to array).</p>\n<pre><code>array.push(4);\n</code></pre>\n<p>Why mutation is bad? It has to do with how the memory works. </p>\n<p>When we create our state, for example:</p>\n<pre><code>const [array, setArray] = useState([1,2,3])\n</code></pre>\n<p>This variable will be created as an object in the memory on location lets say aaa and this object will be pointing to other memory locations for each of the elements in the array. Number 1 will have memory location xxx, Number 2 will have memory location yyy, etc). The ARRAY object in the memory location aaa only points to other memory locations. </p>\n<p>Imagine we now MUTATE/change the existing array by:</p>\n<pre><code>array.push(4);\n</code></pre>\n<p>This changes the EXISTING array, in memory however the memory location aaa of the WHOLE array object did NOT change (because it is not a NEW object, it is the SAME object, just mutated/slightly change). Only thing that changed is that ARRAY object on location aaa is now pointing also to number 4 located lets say on memory location qqq. If the memory location of the whole array did not change, the render of the whole component will not be triggered!!</p>\n<p>In order to trigger the render, we need to create a NEW object in the memory! For example, creating a new array with new memory location which will be then set as the new state using <code>setArray(newArray)</code>.</p>\n<p>Best way to create a new array and concatenate the new value to it is:</p>\n<p>There are two array methods which ave potential to be used:</p>\n<ul>\n<li>array.push('new value')</li>\n<li>array.concat('new value')</li>\n</ul>\n<p><code>array.push('new value')</code> returns the <strong>LENGHT</strong> of the extended array, instead of the array itself! Moreover it MUTATES the array, so it should NOT be used.</p>\n<p><code>array.concat('new value')</code> returns a new array which can be then set to OVERWRITE the state used useState hook.</p>\n<blockquote>\n<p>Great source: </p>\n</blockquote>\n<p><a href=\"https://blog.logrocket.com/immutability-in-react-ebe55253a1cc/\">https://blog.logrocket.com/immutability-in-react-ebe55253a1cc/</a></p>\n<blockquote>\n<p>Even greater resource:</p>\n</blockquote>\n<p><a href=\"https://www.samanthaming.com/tidbits/35-es6-way-to-clone-an-array\">https://www.samanthaming.com/tidbits/35-es6-way-to-clone-an-array</a></p>","frontmatter":{"title":"React state immutability"},"excerpt":"How to update an array state in React? States in React are declared with const and therefore immutable. It means we cant (or rather shouldntâ€¦"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/React_State_Immutability/"}}}