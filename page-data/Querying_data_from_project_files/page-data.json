{"componentChunkName":"component---src-templates-blog-post-js","path":"/Querying_data_from_project_files/","webpackCompilationHash":"e26d21c98e2ac220d89f","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>We can query images, or content of the website (text) from files in our project folder.</p>\n</blockquote>\n<blockquote>\n<p>Firstly open your command line in Ubuntu and install the gatsby package called source filesystem plugin. The filesystem source plugin lets you query data ABOUT files (note: but it does NOT allow you to query data inside files, for that we have another plugin called transform)\nnpm install --save gatsby-source-filesystem</p>\n</blockquote>\n<blockquote>\n<p>Secondly open the gatsby-config.js and add this plugin there:\nplugins: [</p>\n</blockquote>\n<pre><code>{\n  resolve: `gatsby-source-filesystem`,\n  options: {\n    name: `src`,\n    path: `${__dirname}/src/`,\n  },\n},\n</code></pre>\n<blockquote>\n<p>Save and restart gatsby development environment\ngatsby develop</p>\n</blockquote>\n<blockquote>\n<p>open the <a href=\"http://localhost:8000/___graphql\">http://localhost:8000/___graphql</a> Two new elements will be added there: files and allFile</p>\n</blockquote>\n<blockquote>\n<p>Select some items for our query. For example base is the name of the file, prettySize is the size of th efile, relativeDirectory is a folder in which file resides, etc</p>\n</blockquote>\n<blockquote>\n<p>Lets use this data and print it to console\nimport React from \"react\"\nimport { graphql } from \"gatsby\"\nimport Layout from \"../components/layout\"\nexport default ({ data }) => {\nconsole.log(data)\nreturn (</p>\n</blockquote>\n<pre><code>&#x3C;Layout>\n  &#x3C;div>Hello world&#x3C;/div>\n&#x3C;/Layout>\n</code></pre>\n<p>  )\n}\nexport const query = graphql<code>query { allFile { edges { node { relativePath prettySize extension birthTime(fromNow: true) } } } }</code></p>\n<blockquote>\n<p>Lets make the data beautiful in a table:\nimport React from \"react\"\nimport { graphql } from \"gatsby\"\nimport Layout from \"../components/layout\"\nexport default ({ data }) => {\nconsole.log(data)\nreturn (</p>\n</blockquote>\n<pre><code>&#x3C;Layout>\n  &#x3C;div>\n    &#x3C;h1>My Site's Files&#x3C;/h1>\n    &#x3C;table>\n      &#x3C;thead>\n        &#x3C;tr>\n          &#x3C;th>relativePath&#x3C;/th>\n          &#x3C;th>prettySize&#x3C;/th>\n          &#x3C;th>extension&#x3C;/th>\n          &#x3C;th>birthTime&#x3C;/th>\n        &#x3C;/tr>\n      &#x3C;/thead>\n      &#x3C;tbody>\n        {data.allFile.edges.map(({ node }, index) => (\n          &#x3C;tr key={index}>\n            &#x3C;td>{node.relativePath}&#x3C;/td>\n            &#x3C;td>{node.prettySize}&#x3C;/td>\n            &#x3C;td>{node.extension}&#x3C;/td>\n            &#x3C;td>{node.birthTime}&#x3C;/td>\n          &#x3C;/tr>\n        ))}\n      &#x3C;/tbody>\n    &#x3C;/table>\n  &#x3C;/div>\n&#x3C;/Layout>\n</code></pre>\n<p>  )\n}\nexport const query = graphql<code>query { allFile { edges { node { relativePath prettySize extension birthTime(fromNow: true) } } } }</code></p>\n<blockquote>\n<table> tag creates a table\n</blockquote>\n<blockquote>\n<p><thread> tag is used to group header content in an HTML table. The <thead> element is used in conjunction with the <tbody> and <tfoot> elements to specify each part of a table (header, body, footer). Browsers can use these elements to enable scrolling of the table body independently of the header and footer. Also, when printing a large table that spans multiple pages, these elements can enable the table header and footer to be printed at the top and bottom of each page. The <thead> tag must be used in the following context: As a child of a <table> element, after any <caption>, and <colgroup> elements, and before any <tbody>, <tfoot>, and <tr> elements. </p>\n</blockquote>\n<blockquote>\n<tr> tag means table row\n</blockquote>\n<blockquote>\n<th> tag means one column in a table header\n</blockquote>\n<blockquote>\n<td> tag means one column in the table data\n</blockquote>\n<blockquote>\n<p>for each tr we will take all available data into columns</p>\n</blockquote>\n<blockquote>\n<p>How does this part of the code work?\n{data.allFile.edges.map(({ node }, index) => (</p>\n</blockquote>\n<pre><code>          &#x3C;tr key={index}>\n            &#x3C;td>{node.base}&#x3C;/td>\n            &#x3C;td>{node.prettySize}&#x3C;/td>\n            &#x3C;td>{node.relativeDirectory}&#x3C;/td>\n            &#x3C;td>{node.name}&#x3C;/td>\n          &#x3C;/tr>\n        ))}\n</code></pre>\n<blockquote>\n<p>Map is a method which can be called on an array. When we query data, you can see on the right column on GraphiQL how our data will look like: For example:\n{\n\"data\": {</p>\n</blockquote>\n<pre><code>\"allFile\": {\n  \"edges\": [\n    {\n      \"node\": {\n        \"id\": \"3d02d57a-a1ff-58a6-a75b-41d2d1f5de2f\",\n        \"base\": \"container.js\",\n        \"prettySize\": \"177 B\",\n        \"relativeDirectory\": \"components\",\n        \"name\": \"container\"\n      }\n    },\n    {\n      \"node\": {\n        \"id\": \"bfd68830-b23b-5750-9e97-fb73e577ebc8\",\n        \"base\": \"header.js\",\n        \"prettySize\": \"141 B\",\n        \"relativeDirectory\": \"components\",\n        \"name\": \"header\"\n      }\n    },\n    {\n      \"node\": {\n        \"id\": \"5110e7f0-f000-5a81-b65f-2d655e4937b4\",\n        \"base\": \"container.module.css\",\n        \"prettySize\": \"55 B\",\n        \"relativeDirectory\": \"components\",\n        \"name\": \"container.module\"\n      }\n    },\n    {\n      \"node\": {\n        \"id\": \"09ae19a0-accc-5c2a-9caa-ea806602b54f\",\n        \"base\": \"layout.js\",\n        \"prettySize\": \"1.25 kB\",\n        \"relativeDirectory\": \"components\",\n        \"name\": \"layout\"\n      }\n    },\n    {\n      \"node\": {\n        \"id\": \"e0c2ac65-ada6-5773-a74d-6129e1de7f7b\",\n        \"base\": \"about-css-modules.js\",\n        \"prettySize\": \"1.03 kB\",\n        \"relativeDirectory\": \"pages\",\n        \"name\": \"about-css-modules\"\n      }\n    },\n    {\n      \"node\": {\n        \"id\": \"95b910e6-a707-512e-b6cd-09e0f60fd8cb\",\n        \"base\": \"about-css-modules.module.css\",\n        \"prettySize\": \"334 B\",\n        \"relativeDirectory\": \"pages\",\n        \"name\": \"about-css-modules.module\"\n      }\n    },\n    {\n      \"node\": {\n        \"id\": \"d0e66873-11b2-5ecf-9971-c397b39412a8\",\n        \"base\": \"about.js\",\n        \"prettySize\": \"484 B\",\n        \"relativeDirectory\": \"pages\",\n        \"name\": \"about\"\n      }\n    },\n    {\n      \"node\": {\n        \"id\": \"391e78c8-e96e-5412-a4c4-02d3074c2bc1\",\n        \"base\": \"contact.js\",\n        \"prettySize\": \"232 B\",\n        \"relativeDirectory\": \"pages\",\n        \"name\": \"contact\"\n      }\n    },\n    {\n      \"node\": {\n        \"id\": \"689eea2c-7d70-53e6-8078-26e28cd337ce\",\n        \"base\": \"index.js\",\n        \"prettySize\": \"358 B\",\n        \"relativeDirectory\": \"pages\",\n        \"name\": \"index\"\n      }\n    },\n    {\n      \"node\": {\n        \"id\": \"318cd83a-3107-5cbb-b65e-b2eb0fb3a428\",\n        \"base\": \"global.css\",\n        \"prettySize\": \"49 B\",\n        \"relativeDirectory\": \"styles\",\n        \"name\": \"global\"\n      }\n    },\n    {\n      \"node\": {\n        \"id\": \"34912156-9592-5c52-aac4-7e851d124baa\",\n        \"base\": \"typography.js\",\n        \"prettySize\": \"226 B\",\n        \"relativeDirectory\": \"utils\",\n        \"name\": \"typography\"\n      }\n    }\n  ]\n}\n</code></pre>\n<p>  }\n}</p>\n<p>Notice how data.allFile.edges returns an ARRAY of OBJECTS!!!! Which means we can use array method called map on it. Map works in a way that it itterated through every single element of the array and performs a certain function in it. It doesnt change original array, but creates a new array on which the function is performed.  One small example is here:</p>\n<p>var array1 = [1, 4, 9, 16];\n// pass a function to map\nconst map1 = array1.map(x => x * 2);</p>\n<p>console.log(map1);\n// expected output: Array [2, 8, 18, 32]</p>\n<blockquote>\n<p>x is the element of the array which we currentl itterate through</p>\n</blockquote>\n<blockquote>\n<p>Documentation of Map is here: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map</a></p>\n</blockquote>\n<blockquote>\n<p>Notice how the syntax looks:\nvar new_array = arr.map(function callback(currentValue[, index[, array]]) {</p>\n</blockquote>\n<pre><code>// Return element for new_array\n</code></pre>\n<p>}[, thisArg])</p>\n<blockquote>\n<p>this means that when using .map method we can use the current object we are on, but also its index!!!! which mean  index 0,1,2, etc</p>\n</blockquote>\n<blockquote>\n<p>in our .map method we have a function which takes 2 arguments: ({ node }, index)\n{ node } is an actual object which resides under data.allFile.edges\nIt should actually be called node, otherwise we will have an error.\nindex is the index of the element in our array on which we are currently itterating.</p>\n</blockquote>\n<blockquote>\n<p>for each element in our array, we will create a <tr> tag which will have a unique property key which will be equal to the index of that element in the array</p>\n</blockquote>\n<tr key={index}>\n...\n</tr> \n<blockquote>\n<p>then this table row (tr) will create 4 columns <td>\neach of <td> tags will access the element of array, which is in fact an object, where we retrieve values for example: node.base</p>\n</blockquote>\n<blockquote>\n<p>In React each array element over which we will itterate needs a unique key property.\nEach time you iterate over an array you have to set the key prop to each of the resulting DOM element as React needs it to optimize the re-rendering.\nReact for example will detect duplicates and only renders the first node with this key. Without key={index} there will be an error in console that each child in the list should have a unique key property. More reading:\n<a href=\"https://stackoverflow.com/questions/28329382/understanding-unique-keys-for-array-children-in-react-js\">https://stackoverflow.com/questions/28329382/understanding-unique-keys-for-array-children-in-react-js</a>\n<a href=\"https://stackoverflow.com/questions/37651660/react-each-child-in-an-array-or-iterator-should-have-a-unique-key-prop?rq=1\">https://stackoverflow.com/questions/37651660/react-each-child-in-an-array-or-iterator-should-have-a-unique-key-prop?rq=1</a></p>\n</blockquote>\n<blockquote>\n<p>The filesystem source plugin lets you query data ABOUT files but what if you want to query data INSIDE files? To make this possible, Gatsby supports transformer plugins which take raw content from source plugins and transform it into something more usable. Example: markdown files .md</p>\n</blockquote>\n<blockquote>\n<p>create a new markdow file under your pages folder\nblog_post.md</p>\n</blockquote>\n<blockquote>\n<p>look at the GrphiQL and refresh the query, you will see the new .md file in there</p>\n</blockquote>\n<blockquote>\n<p>First install transformer plugin\nnpm install --save gatsby-transformer-remark</p>\n</blockquote>\n<blockquote>\n<p>add plugin to gatsby config\nmodule.exports = {\nsiteMetadata: {</p>\n</blockquote>\n<pre><code>title: `Pandas Eating Lots`,\n</code></pre>\n<p>  },\nplugins: [\n{\nresolve: <code>gatsby-source-filesystem</code>,\noptions: {\nname: <code>src</code>,\npath: <code>${__dirname}/src/</code>,\n},\n},\n<code>gatsby-transformer-remark</code>,\n<code>gatsby-plugin-emotion</code>,\n{\nresolve: <code>gatsby-plugin-typography</code>,\noptions: {\npathToConfigModule: <code>src/utils/typography</code>,\n},\n},\n],\n}</p>\n<blockquote>\n<p>restart your development environment with\ngatsby develop</p>\n</blockquote>\n<blockquote>\n<p>in GraphiQL we will see the new item allMarkdownRemark</p>\n</blockquote>","frontmatter":{"title":"Querying data from project files"},"excerpt":"We can query images, or content of the website (text) from files in our project folder. Firstly open your command line in Ubuntu and installâ€¦"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/Querying_data_from_project_files/"}}}